{"ast":null,"code":"var _jsxFileName = \"/home/venkat/Desktop/covid-vis/src/Histogram.jsx\";\nimport React, { useMemo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport * as d3 from \"d3\";\nimport Chart from \"./Chart/Chart\";\nimport Bars from \"./Chart/Bars\";\nimport Axis from \"./Chart/Axis\";\nimport Legends from \"./Chart/Legends\";\nimport { accessorPropsType } from \"./Chart/utils\";\nconst fillColors = [\"#FC766AFF\", \"#5B84B1FF\"];\n\nconst Histogram = ({\n  data,\n  xAccessor,\n  yAccessor,\n  label,\n  selectedValues,\n  customWidth,\n  customMarginWidth,\n  customHeight\n}) => useMemo(() => {\n  const height = customHeight / 2;\n  const width = customWidth > 1000 ? 800 : customMarginWidth;\n  const marginTop = 100;\n  const marginBottom = 100;\n  const marginLeft = customWidth > 1000 ? 100 : 25;\n  const marginRight = customWidth > 1000 ? 100 : 25;\n  let dimensions = {\n    height,\n    width,\n    marginTop,\n    marginBottom,\n    marginLeft,\n    marginRight,\n    boundedHeight: Math.max(height - marginTop - marginBottom, 0),\n    boundedWidth: Math.max(width - marginLeft - marginRight, 0)\n  };\n  const nullRemovedData = data.filter(area => {\n    if (area.values.length > 0) {\n      return area.key;\n    }\n  });\n  const selectedAreas = selectedValues.map(d => d.value);\n  const dateRange = d3.extent(nullRemovedData.map(area => new Date(area.key)));\n  const allDates = data.map(area => new Date(area.key));\n  const values = data.map(d => d.values).flat();\n  const valuesRange = [0, d3.max(values.map(d => d.dailyLabConfirmedCases))];\n  const xScale = d3.scaleTime().domain(dateRange).range([0, dimensions.boundedWidth]);\n  const yScale = d3.scaleLinear().domain(valuesRange).range([dimensions.boundedHeight, 0]);\n  const xBand = d3.scaleBand().domain(allDates).range([0, dimensions.boundedWidth]).padding(0.2);\n  const xBand1 = d3.scaleBand().domain(selectedAreas).range([0, xBand.bandwidth()]);\n  const barBandWidth = xBand.bandwidth();\n  const color = d3.scaleOrdinal().domain(selectedAreas).range(fillColors);\n\n  const xAccessorScaled = d => xBand1(d.areaName);\n\n  const xAccessorGroupScaled = d => xScale(new Date(d.key));\n\n  const yAccessorScaled = d => yScale(d.dailyLabConfirmedCases);\n\n  const widthAccessorScaled = () => xBand1.bandwidth();\n\n  const heightAccessorScaled = d => dimensions.boundedHeight - yScale(d.dailyLabConfirmedCases);\n\n  const keyAccessor = (d, i) => i;\n\n  const colorAccessorScaled = d => color(d.areaName);\n\n  const colorScale = d => color(d);\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Histogram\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Chart, {\n    dimensions: dimensions,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Legends, {\n    data: selectedValues,\n    dimensions: dimensions,\n    scale: colorScale,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Axis, {\n    dimensions: dimensions,\n    dimension: \"x\",\n    scale: xScale,\n    label: label,\n    barBandWidth: barBandWidth,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Axis, {\n    dimensions: dimensions,\n    dimension: \"y\",\n    scale: yScale,\n    label: \"Count\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Bars, {\n    data: data,\n    keyAccessor: keyAccessor,\n    xAccessorGroup: xAccessorGroupScaled,\n    xAccessor: xAccessorScaled,\n    yAccessor: yAccessorScaled,\n    widthAccessor: widthAccessorScaled,\n    heightAccessor: heightAccessorScaled,\n    fill: colorAccessorScaled,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 11\n    }\n  })));\n}, [label, data, customMarginWidth, customWidth]);\n\nHistogram.propTypes = {\n  xAccessor: accessorPropsType,\n  yAccessor: accessorPropsType,\n  xLabel: PropTypes.string,\n  yLabel: PropTypes.string\n};\nHistogram.defaultProps = {\n  xAccessor: d => d.x,\n  yAccessor: d => d.y\n};\nexport default Histogram;","map":{"version":3,"sources":["/home/venkat/Desktop/covid-vis/src/Histogram.jsx"],"names":["React","useMemo","PropTypes","d3","Chart","Bars","Axis","Legends","accessorPropsType","fillColors","Histogram","data","xAccessor","yAccessor","label","selectedValues","customWidth","customMarginWidth","customHeight","height","width","marginTop","marginBottom","marginLeft","marginRight","dimensions","boundedHeight","Math","max","boundedWidth","nullRemovedData","filter","area","values","length","key","selectedAreas","map","d","value","dateRange","extent","Date","allDates","flat","valuesRange","dailyLabConfirmedCases","xScale","scaleTime","domain","range","yScale","scaleLinear","xBand","scaleBand","padding","xBand1","bandwidth","barBandWidth","color","scaleOrdinal","xAccessorScaled","areaName","xAccessorGroupScaled","yAccessorScaled","widthAccessorScaled","heightAccessorScaled","keyAccessor","i","colorAccessorScaled","colorScale","propTypes","xLabel","string","yLabel","defaultProps","x","y"],"mappings":"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","sourcesContent":["import React, { useMemo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport * as d3 from \"d3\";\n\nimport Chart from \"./Chart/Chart\";\nimport Bars from \"./Chart/Bars\";\nimport Axis from \"./Chart/Axis\";\nimport Legends from \"./Chart/Legends\";\nimport { accessorPropsType } from \"./Chart/utils\";\n\nconst fillColors = [\"#FC766AFF\", \"#5B84B1FF\"];\nconst Histogram = ({\n  data,\n  xAccessor,\n  yAccessor,\n  label,\n  selectedValues,\n  customWidth,\n  customMarginWidth,\n  customHeight,\n}) =>\n  useMemo(() => {\n    const height = customHeight / 2;\n    const width = customWidth > 1000 ? 800 : customMarginWidth;\n    const marginTop = 100;\n    const marginBottom = 100;\n    const marginLeft = customWidth > 1000 ? 100 : 25;\n    const marginRight = customWidth > 1000 ? 100 : 25;\n\n    let dimensions = {\n      height,\n      width,\n      marginTop,\n      marginBottom,\n      marginLeft,\n      marginRight,\n      boundedHeight: Math.max(height - marginTop - marginBottom, 0),\n      boundedWidth: Math.max(width - marginLeft - marginRight, 0),\n    };\n\n    const nullRemovedData = data.filter((area) => {\n      if (area.values.length > 0) {\n        return area.key;\n      }\n    });\n    const selectedAreas = selectedValues.map((d) => d.value);\n    const dateRange = d3.extent(\n      nullRemovedData.map((area) => new Date(area.key))\n    );\n    const allDates = data.map((area) => new Date(area.key));\n    const values = data.map((d) => d.values).flat();\n    const valuesRange = [\n      0,\n      d3.max(values.map((d) => d.dailyLabConfirmedCases)),\n    ];\n\n    const xScale = d3\n      .scaleTime()\n      .domain(dateRange)\n      .range([0, dimensions.boundedWidth]);\n\n    const yScale = d3\n      .scaleLinear()\n      .domain(valuesRange)\n      .range([dimensions.boundedHeight, 0]);\n\n    const xBand = d3\n      .scaleBand()\n      .domain(allDates)\n      .range([0, dimensions.boundedWidth])\n      .padding(0.2);\n\n    const xBand1 = d3\n      .scaleBand()\n      .domain(selectedAreas)\n      .range([0, xBand.bandwidth()]);\n\n    const barBandWidth = xBand.bandwidth();\n\n    const color = d3.scaleOrdinal().domain(selectedAreas).range(fillColors);\n\n    const xAccessorScaled = (d) => xBand1(d.areaName);\n    const xAccessorGroupScaled = (d) => xScale(new Date(d.key));\n    const yAccessorScaled = (d) => yScale(d.dailyLabConfirmedCases);\n    const widthAccessorScaled = () => xBand1.bandwidth();\n    const heightAccessorScaled = (d) =>\n      dimensions.boundedHeight - yScale(d.dailyLabConfirmedCases);\n    const keyAccessor = (d, i) => i;\n    const colorAccessorScaled = (d) => color(d.areaName);\n    const colorScale = (d) => color(d);\n\n    return (\n      <div className=\"Histogram\">\n        <Chart dimensions={dimensions}>\n          <Legends\n            data={selectedValues}\n            dimensions={dimensions}\n            scale={colorScale}\n          />\n          <Axis\n            dimensions={dimensions}\n            dimension=\"x\"\n            scale={xScale}\n            label={label}\n            barBandWidth={barBandWidth}\n          />\n          <Axis\n            dimensions={dimensions}\n            dimension=\"y\"\n            scale={yScale}\n            label=\"Count\"\n          />\n          <Bars\n            data={data}\n            keyAccessor={keyAccessor}\n            xAccessorGroup={xAccessorGroupScaled}\n            xAccessor={xAccessorScaled}\n            yAccessor={yAccessorScaled}\n            widthAccessor={widthAccessorScaled}\n            heightAccessor={heightAccessorScaled}\n            fill={colorAccessorScaled}\n          />\n        </Chart>\n      </div>\n    );\n  }, [label, data, customMarginWidth, customWidth]);\n\nHistogram.propTypes = {\n  xAccessor: accessorPropsType,\n  yAccessor: accessorPropsType,\n  xLabel: PropTypes.string,\n  yLabel: PropTypes.string,\n};\n\nHistogram.defaultProps = {\n  xAccessor: (d) => d.x,\n  yAccessor: (d) => d.y,\n};\n\nexport default Histogram;\n"]},"metadata":{},"sourceType":"module"}