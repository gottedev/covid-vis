(this["webpackJsonpcovid-vis"]=this["webpackJsonpcovid-vis"]||[]).push([[0],{169:function(e,t,n){e.exports=n(306)},174:function(e,t,n){},194:function(e,t,n){},207:function(e,t){},305:function(e,t,n){},306:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(14),c=n.n(i),o=(n(174),n(47)),s=n(75),u=n.n(s),l=n(159),d=n(155),m=n(12),f=n(11),h=n(3),b=n.n(h),g=n(73),v=n.n(g),p=n(2),y=n.n(p),E=n(156),x=n.n(E),O=function(e,t,n){var a=function(e){return b()(e)},r=e&&t&&n.filter((function(n){if(a(n.key).diff(e)>0&&a(n.key).diff(t)<0)return n}));return r||n},j=function(e,t){return x()(t,(function(t){return t[e]}))},k=function(e,t){var n=e.map((function(e){return e.value}));return t.map((function(e){return{key:e.key,values:e.values.filter((function(e){if(n.includes(e.areaName))return e}))}}))},w=function(e){return f.i("%d/%m/%y")(e)},D=function(e,t){return f.d().key((function(t){return t[e]})).entries(t)},A=(y.a.oneOfType([y.a.func,y.a.number]),y.a.shape({height:y.a.number,width:y.a.number,marginTop:y.a.number,marginRight:y.a.number,marginBottom:y.a.number,marginLeft:y.a.number}),function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}),N=function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight};n(194);var C=function(e){var t=e.dimensions,n=e.children;return r.a.createElement("svg",{className:"Chart",width:t.width,height:t.height,viewBox:"0 0 ".concat(t.width," ").concat(t.height)},r.a.createElement("g",{transform:"translate(".concat(t.marginLeft,", ").concat(t.marginTop,")")},n))};C.defaultProps={dimensions:{}};var _=C,W=n(37);var H=function(e){var t,n=e.keyAccessor,i=e.xAccessor,c=e.yAccessor,o=e.widthAccessor,s=e.heightAccessor,u=e.d,l=e.index,d=e.fill,f=Object(a.useState)(!1),h=Object(m.a)(f,2),b=h[0],g=h[1];return r.a.createElement("g",null,r.a.createElement("rect",{className:"".concat(b?"Bars__rect-hover":"Bars__rect"),key:n(l),x:i(u),y:c(u),width:o(u),height:s(u),fill:d(u),onMouseOver:function(e){e.stopPropagation(),g(!0)},onMouseLeave:function(e){e.stopPropagation(),g(!1)}}),r.a.createElement("title",null,(t=u,"".concat(w(new Date(t.specimenDate))," \n").concat(t.dailyLabConfirmedCases))))};var S=function(e){var t=e.xAccessorGroup,n=e.d,a=e.i,i=Object(W.a)(e,["xAccessorGroup","d","i"]);return r.a.createElement("g",{className:"Svg__Group",key:a,transform:"translate(".concat(t(n),",0)")},n.values.map((function(e,t){return r.a.createElement(H,Object.assign({d:e,key:t,index:t},i))})))},L=function(e){return r.a.createElement(r.a.Fragment,null,e.data.map((function(t,n){return r.a.createElement(S,Object.assign({},e,{d:t,i:n,key:n}))})))};L.defaultProps={};var M=L,T={x:function(e){var t=e.dimensions,n=e.label,a=(e.formatTick,e.scale),i=e.barBandWidth,c=Object(W.a)(e,["dimensions","label","formatTick","scale","barBandWidth"]),o=t.boundedWidth<600?t.boundedWidth/100:t.boundedWidth/250,s=a.ticks(o);return r.a.createElement("g",Object.assign({className:"Axis AxisHorizontal",transform:"translate(0, ".concat(t.boundedHeight,")")},c),r.a.createElement("line",{className:"Axis__line",x2:t.boundedWidth+i}),s.map((function(e,t){return r.a.createElement("text",{key:e,className:"Axis__tick",transform:"translate(".concat(a(e),", 35) rotate(-70)")},w(e))})),n&&r.a.createElement("text",{className:"Axis__label",transform:"translate(".concat(t.boundedWidth/2,", 90)")},n))},y:function(e){var t=e.dimensions,n=e.label,a=e.formatTick,i=e.scale,c=Object(W.a)(e,["dimensions","label","formatTick","scale"]),o=(t.boundedHeight,i.ticks());return r.a.createElement("g",Object.assign({className:"Axis AxisVertical"},c),r.a.createElement("line",{className:"Axis__line",y2:t.boundedHeight}),o.map((function(e,t){return r.a.createElement("text",{key:e,className:"Axis__tick",transform:"translate(-16, ".concat(i(e),")")},a(e))})),n&&r.a.createElement("text",{className:"Axis__label",style:{transform:"translate(-56px, ".concat(t.boundedHeight/2,"px) rotate(-90deg)")}},n))}},B=function(e){var t=e.dimension,n=e.dimensions,a=Object(W.a)(e,["dimension","dimensions"]),i=T[t];return i?r.a.createElement(i,Object.assign({dimensions:n},a)):null};B.defaultProps={dimension:"x",scale:null,formatTick:f.b(",")};var I=B;var P=function(e){var t=e.data,n=e.dimensions,a=e.scale;return t.map((function(e,t){return r.a.createElement("g",{key:t,fill:"".concat(a(e.value)),transform:"translate(".concat(n.boundedWidth-100,",").concat(25*t-45,") ")},r.a.createElement("rect",{width:"20",height:"20"}),r.a.createElement("text",{x:"25",y:"15",fill:"".concat(a(e.value))},e.value))}))},F=["#FC766AFF","#5B84B1FF"],V=function(e){var t=e.data,n=e.label,i=e.selectedValues,c=e.customWidth,o=e.customMarginWidth;return Object(a.useMemo)((function(){var e=c>1e3?100:0,a=c>1e3?100:70,o=c>1e3?100:25,s={height:600,width:800,marginTop:e,marginBottom:100,marginLeft:a,marginRight:o,boundedHeight:Math.max(600-e-100,0),boundedWidth:Math.max(800-a-o,0)},u=t.filter((function(e){if(e.values.length>0)return e.key})),l=i.map((function(e){return e.value})),d=f.a(u.map((function(e){return new Date(e.key)}))),m=t.map((function(e){return new Date(e.key)})),h=t.map((function(e){return e.values})).flat(),b=[0,f.c(h.map((function(e){return e.dailyLabConfirmedCases})))],g=f.h().domain(d).range([0,s.boundedWidth]),v=f.f().domain(b).range([s.boundedHeight,20]),p=f.e().domain(m).range([0,s.boundedWidth]).padding(.2),y=f.e().domain(l).range([0,p.bandwidth()]),E=p.bandwidth(),x=f.g().domain(l).range(F);return r.a.createElement("div",{className:"Histogram"},r.a.createElement(_,{dimensions:s},r.a.createElement(P,{data:i,dimensions:s,scale:function(e){return x(e)}}),r.a.createElement(I,{dimensions:s,dimension:"x",scale:g,label:n,barBandWidth:E}),r.a.createElement(I,{dimensions:s,dimension:"y",scale:v,label:"Count"}),r.a.createElement(M,{data:t,keyAccessor:function(e,t){return t},xAccessorGroup:function(e){return g(new Date(e.key))},xAccessor:function(e){return y(e.areaName)},yAccessor:function(e){return v(e.dailyLabConfirmedCases)},widthAccessor:function(){return y.bandwidth()},heightAccessor:function(e){return s.boundedHeight-v(e.dailyLabConfirmedCases)},fill:function(e){return x(e.areaName)}})))}),[n,t,o,c])};V.defaultProps={xAccessor:function(e){return e.x},yAccessor:function(e){return e.y}};var z=V,R=(n(195),n(157));n(304);var Y=function(e){var t=e.startDate,n=e.endDate,i=e.handleDatesChange,c=e.orientation,o=Object(a.useState)(null),s=Object(m.a)(o,2),u=s[0],l=s[1],d=function(e){return b()(e)},f=d("01/01/2020"),h=d("18/08/2020");return r.a.createElement("div",{className:"App"},r.a.createElement(R.DateRangePicker,{renderCalendarInfo:function(){return r.a.createElement("span",null," please select between 7 days and 30 days")},block:!0,daySize:30,minDate:f,maxDate:h,startDate:t,startDateId:"start-date",endDate:n,endDateId:"end-date",isOutsideRange:function(){return!1},onDatesChange:i,focusedInput:u,displayFormat:function(){return"DD/MM/YYYY"},onFocusChange:function(e){return l(e)},showDefaultInputIcon:!0,inputIconPosition:"after",orientation:c}))},G=(n(305),n(158));var J=function(e){var t=e.options,n=e.width,a=e.styles,i=e.onChangeHandler,c=e.value,o=e.defaultValue;return r.a.createElement(G.a,{isMulti:!0,name:"colors",value:c,options:t,defaultValue:o,onChange:i,width:n,styles:a,className:"basic-multi-select",classNamePrefix:"select"})};var q=function(){var e=b()("05/05/2020"),t=b()("05/18/2020"),n=Object(a.useState)([]),i=Object(m.a)(n,2),c=i[0],s=i[1],h=Object(a.useState)([]),g=Object(m.a)(h,2),p=g[0],y=g[1],E=Object(a.useState)([]),x=Object(m.a)(E,2),w=x[0],C=x[1],_=Object(a.useState)(e),W=Object(m.a)(_,2),H=W[0],S=W[1],L=Object(a.useState)(t),M=Object(m.a)(L,2),T=M[0],B=M[1],I=Object(a.useState)([{value:"County Durham",label:"County Durham"}]),P=Object(m.a)(I,2),F=P[0],V=P[1],R=Object(a.useState)([]),G=Object(m.a)(R,2),q=G[0],K=G[1],Q=f.i("%d/%m/%Y"),U=function(){var e=Object(a.useState)(A()),t=Object(m.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(N()),c=Object(m.a)(i,2),o=c[0],s=c[1];return Object(a.useEffect)((function(){var e=null,t=function(){clearTimeout(e),e=setTimeout((function(){r(A()),s(N())}),150)};return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[]),[o,n]}(),X=Object(m.a)(U,2),Z=X[0],$=X[1],ee=$-.2*$,te=.65*Z;Object(a.useEffect)((function(){(function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,a,r,i,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("./covid-18-08-2020.json");case 2:return t=e.sent,e.next=5,t.data.ltlas;case 5:n=e.sent,a=D("specimenDate",n),r=Object(l.a)(new Map(n.map((function(e){return[e.areaName,{value:e.areaName,label:e.areaName}]}))).values()),i=j("value",r),K(i),s(a),c=k(F,a),y(c),o=O(H,T,c),C(o);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var ne={control:function(e){return Object(o.a)(Object(o.a)({},e),{},{display:"flex",background:"white",height:"48px",borderRadius:"2px",border:"1px solid #dbdbdb"})},menu:function(){return{maxHeight:"40px",background:"white"}},menuList:function(e){return Object(o.a)(Object(o.a)({},e),{},{background:"white",height:"auto"})}};return r.a.createElement("div",{className:"App"},r.a.createElement("h1",{className:"title"},"Coronavirus Daily Vis"),r.a.createElement("div",{className:"chart__controls"},r.a.createElement("div",{className:"date__picker"},r.a.createElement(Y,{startDate:H,endDate:T,setStartDate:S,setEndDate:B,handleDatesChange:function(e){var t=e.startDate,n=e.endDate,a=b()(t),r=b()(n);if(r.diff(a,"days")>30)return null;if(r.diff(a,"days")<7)return null;S(t),B(n);var i=O(t,n,p);i&&C(i)},orientation:$>600?"horizontal":"vertical"})),r.a.createElement("div",{className:"area__select"},r.a.createElement(J,{options:q,styles:ne,defaultValue:{value:"County Durham",label:"County Durham"},onChangeHandler:function(e){if(e&&0!==e.length){if(e.length>2)return alert("only 2 Areas max please"),null;var t=k(e,c),n=O(H,T,t);y(t),C(n),V(e)}else V(e)},value:F}))),r.a.createElement(z,{xAccessor:function(e){return Q(e.specimenDate)},yAccessor:function(e){return e.dailyLabConfirmedCases},data:w,selectedValues:F,label:"Daily cases",customWidth:$,customHeight:Z,customMarginHeight:te,customMarginWidth:ee}),r.a.createElement("p",null,"Data Source http://coronavirus.data.gov.uk/"),r.a.createElement("p",null,"This App is based on previous api of http://coronavirus.data.gov.uk/ I am working on the new api. ",r.a.createElement("br",null)," Note: Data is available only upto 17/08/2020"))};c.a.render(r.a.createElement(q,null),document.getElementById("root"))}},[[169,1,2]]]);
//# sourceMappingURL=main.02a97c01.chunk.js.map