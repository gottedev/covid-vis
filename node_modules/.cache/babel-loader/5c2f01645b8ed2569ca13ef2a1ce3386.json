{"ast":null,"code":"var _jsxFileName = \"/home/venkat/Desktop/covid-vis/src/Histogram.jsx\";\nimport React, { useMemo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport * as d3 from \"d3\";\nimport Chart from \"./Chart/Chart\";\nimport Bars from \"./Chart/Bars\";\nimport Axis from \"./Chart/Axis\";\nimport Legends from \"./Chart/Legends\";\nimport { accessorPropsType } from \"./Chart/utils\";\nconst fillColors = [\"#FC766AFF\", \"#5B84B1FF\"];\n\nconst Histogram = ({\n  data,\n  xAccessor,\n  yAccessor,\n  label,\n  selectedValues\n}) => {\n  const height = 600;\n  const width = 800;\n  const marginTop = 100;\n  const marginBottom = 100;\n  const marginLeft = 100;\n  const marginRight = 100;\n  let dimensions = {\n    height,\n    width,\n    marginTop,\n    marginBottom,\n    marginLeft,\n    marginRight,\n    boundedHeight: Math.max(height - marginTop - marginBottom, 0),\n    boundedWidth: Math.max(width - marginLeft - marginRight, 0)\n  };\n  const nullRemovedData = data.filter(area => {\n    if (area.values.length > 0) {\n      return area.key;\n    }\n  });\n  const selectedAreas = selectedValues.map(d => d.value);\n  const dateRange = d3.extent(nullRemovedData.map(area => new Date(area.key)));\n  const allDates = data.map(area => new Date(area.key));\n  const values = data.map(d => d.values).flat();\n  const valuesRange = [0, d3.max(values.map(d => d.dailyLabConfirmedCases))];\n  const xScale = d3.scaleTime().domain(dateRange).rangeRound([0, dimensions.boundedWidth]);\n  const yScale = d3.scaleLinear().domain(valuesRange).range([dimensions.boundedHeight, 0]).nice();\n  const xBand = d3.scaleBand().domain(allDates).rangeRound([0, dimensions.boundedWidth]).padding(0.4);\n  const xBand1 = d3.scaleBand().domain(selectedAreas).rangeRound([0, xBand.bandwidth()]);\n  const color = d3.scaleOrdinal().domain(selectedAreas).range(fillColors);\n\n  const xAccessorScaled = d => xBand1(d.areaName);\n\n  const xAccessorGroupScaled = d => xScale(new Date(d.key));\n\n  const yAccessorScaled = d => yScale(d.dailyLabConfirmedCases);\n\n  const widthAccessorScaled = () => xBand1.bandwidth();\n\n  const heightAccessorScaled = d => dimensions.boundedHeight - yScale(d.dailyLabConfirmedCases);\n\n  const keyAccessor = (d, i) => i;\n\n  const colorAccessorScaled = d => color(d.areaName);\n\n  const colorScale = d => color(d);\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Histogram\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Chart, {\n    dimensions: dimensions,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Legends, {\n    data: selectedValues,\n    dimensions: dimensions,\n    scale: colorScale,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Axis, {\n    dimensions: dimensions,\n    dimension: \"x\",\n    scale: xScale,\n    label: label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Axis, {\n    dimensions: dimensions,\n    dimension: \"y\",\n    scale: yScale,\n    label: \"Count\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Bars, {\n    data: data,\n    keyAccessor: keyAccessor,\n    xAccessorGroup: xAccessorGroupScaled,\n    xAccessor: xAccessorScaled,\n    yAccessor: yAccessorScaled,\n    widthAccessor: widthAccessorScaled,\n    heightAccessor: heightAccessorScaled,\n    fill: colorAccessorScaled,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  })));\n};\n\nHistogram.propTypes = {\n  xAccessor: accessorPropsType,\n  yAccessor: accessorPropsType,\n  xLabel: PropTypes.string,\n  yLabel: PropTypes.string\n};\nHistogram.defaultProps = {\n  xAccessor: d => d.x,\n  yAccessor: d => d.y\n};\nconst memoizedHist = useMemo(Histogram, []);\nexport default memoizedHist;","map":{"version":3,"sources":["/home/venkat/Desktop/covid-vis/src/Histogram.jsx"],"names":["React","useMemo","PropTypes","d3","Chart","Bars","Axis","Legends","accessorPropsType","fillColors","Histogram","data","xAccessor","yAccessor","label","selectedValues","height","width","marginTop","marginBottom","marginLeft","marginRight","dimensions","boundedHeight","Math","max","boundedWidth","nullRemovedData","filter","area","values","length","key","selectedAreas","map","d","value","dateRange","extent","Date","allDates","flat","valuesRange","dailyLabConfirmedCases","xScale","scaleTime","domain","rangeRound","yScale","scaleLinear","range","nice","xBand","scaleBand","padding","xBand1","bandwidth","color","scaleOrdinal","xAccessorScaled","areaName","xAccessorGroupScaled","yAccessorScaled","widthAccessorScaled","heightAccessorScaled","keyAccessor","i","colorAccessorScaled","colorScale","propTypes","xLabel","string","yLabel","defaultProps","x","y","memoizedHist"],"mappings":"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","sourcesContent":["import React, { useMemo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport * as d3 from \"d3\";\n\nimport Chart from \"./Chart/Chart\";\nimport Bars from \"./Chart/Bars\";\nimport Axis from \"./Chart/Axis\";\nimport Legends from \"./Chart/Legends\";\nimport { accessorPropsType } from \"./Chart/utils\";\n\nconst fillColors = [\"#FC766AFF\", \"#5B84B1FF\"];\nconst Histogram = ({ data, xAccessor, yAccessor, label, selectedValues }) => {\n  const height = 600;\n  const width = 800;\n  const marginTop = 100;\n  const marginBottom = 100;\n  const marginLeft = 100;\n  const marginRight = 100;\n\n  let dimensions = {\n    height,\n    width,\n    marginTop,\n    marginBottom,\n    marginLeft,\n    marginRight,\n    boundedHeight: Math.max(height - marginTop - marginBottom, 0),\n    boundedWidth: Math.max(width - marginLeft - marginRight, 0),\n  };\n  const nullRemovedData = data.filter((area) => {\n    if (area.values.length > 0) {\n      return area.key;\n    }\n  });\n  const selectedAreas = selectedValues.map((d) => d.value);\n  const dateRange = d3.extent(\n    nullRemovedData.map((area) => new Date(area.key))\n  );\n  const allDates = data.map((area) => new Date(area.key));\n  const values = data.map((d) => d.values).flat();\n  const valuesRange = [0, d3.max(values.map((d) => d.dailyLabConfirmedCases))];\n\n  const xScale = d3\n    .scaleTime()\n    .domain(dateRange)\n    .rangeRound([0, dimensions.boundedWidth]);\n\n  const yScale = d3\n    .scaleLinear()\n    .domain(valuesRange)\n    .range([dimensions.boundedHeight, 0])\n    .nice();\n\n  const xBand = d3\n    .scaleBand()\n    .domain(allDates)\n    .rangeRound([0, dimensions.boundedWidth])\n    .padding(0.4);\n\n  const xBand1 = d3\n    .scaleBand()\n    .domain(selectedAreas)\n    .rangeRound([0, xBand.bandwidth()]);\n\n  const color = d3.scaleOrdinal().domain(selectedAreas).range(fillColors);\n\n  const xAccessorScaled = (d) => xBand1(d.areaName);\n  const xAccessorGroupScaled = (d) => xScale(new Date(d.key));\n  const yAccessorScaled = (d) => yScale(d.dailyLabConfirmedCases);\n  const widthAccessorScaled = () => xBand1.bandwidth();\n  const heightAccessorScaled = (d) =>\n    dimensions.boundedHeight - yScale(d.dailyLabConfirmedCases);\n  const keyAccessor = (d, i) => i;\n  const colorAccessorScaled = (d) => color(d.areaName);\n  const colorScale = (d) => color(d);\n\n  return (\n    <div className=\"Histogram\">\n      <Chart dimensions={dimensions}>\n        <Legends\n          data={selectedValues}\n          dimensions={dimensions}\n          scale={colorScale}\n        />\n        <Axis\n          dimensions={dimensions}\n          dimension=\"x\"\n          scale={xScale}\n          label={label}\n        />\n        <Axis\n          dimensions={dimensions}\n          dimension=\"y\"\n          scale={yScale}\n          label=\"Count\"\n        />\n        <Bars\n          data={data}\n          keyAccessor={keyAccessor}\n          xAccessorGroup={xAccessorGroupScaled}\n          xAccessor={xAccessorScaled}\n          yAccessor={yAccessorScaled}\n          widthAccessor={widthAccessorScaled}\n          heightAccessor={heightAccessorScaled}\n          fill={colorAccessorScaled}\n        />\n      </Chart>\n    </div>\n  );\n};\n\nHistogram.propTypes = {\n  xAccessor: accessorPropsType,\n  yAccessor: accessorPropsType,\n  xLabel: PropTypes.string,\n  yLabel: PropTypes.string,\n};\n\nHistogram.defaultProps = {\n  xAccessor: (d) => d.x,\n  yAccessor: (d) => d.y,\n};\n\nconst memoizedHist = useMemo(Histogram, []);\n\nexport default memoizedHist;\n"]},"metadata":{},"sourceType":"module"}