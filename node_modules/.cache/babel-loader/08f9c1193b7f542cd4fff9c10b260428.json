{"ast":null,"code":"var _jsxFileName = \"/home/venkat/Desktop/covid-vis/src/App.jsx\";\nimport React, { useState, useEffect, useLayoutEffect } from \"react\";\nimport * as d3 from \"d3\";\nimport moment from \"moment\";\nimport axios from \"axios\";\nimport Histogram from \"./Histogram\";\nimport DatePicker from \"./DatePicker\";\nimport { dateFilter, areaFilter, groupDataByKey, sortBy, useCurrentWitdh } from \"./Chart/utils\";\nimport \"./App.css\";\nimport CustomSelect from \"./Chart/CustomSelect\";\n\nfunction App() {\n  const defaultStartDate = moment(\"05/05/2020\");\n  const defaultEndDate = moment(\"05/18/2020\");\n  const [data, setData] = useState([]);\n  const [areaFilteredData, setAreaFilteredData] = useState([]);\n  const [dateWiseData, setDateWiseData] = useState([]);\n  const [startDate, setStartDate] = useState(defaultStartDate);\n  const [endDate, setEndDate] = useState(defaultEndDate);\n  const [selectedArea, setselectedArea] = useState([{\n    value: \"County Durham\",\n    label: \"County Durham\"\n  }]);\n  const [areas, setAreas] = useState([]);\n  const parseDate = d3.timeFormat(\"%d/%m/%Y\");\n\n  const dateAccessor = d => parseDate(d.specimenDate);\n\n  const casesAccessor = d => d.dailyLabConfirmedCases;\n\n  const customWidth = useCurrentWitdh();\n  const customMarginWidth = customWidth - 20 / 100 * customWidth;\n  console.log(20 / 100 * customWidth);\n  useEffect(() => {\n    const covidData = async () => {\n      const getData = await axios.get(\"/covid-08-06-2020.json\");\n      const areaData = await getData.data.ltlas;\n      const groupDataByDate = groupDataByKey(\"specimenDate\", areaData);\n      const areaNames = [...new Map(areaData.map(name => [name.areaName, {\n        value: name.areaName,\n        label: name.areaName\n      }])).values()];\n      const sortedAreas = sortBy(\"value\", areaNames);\n      setAreas(sortedAreas);\n      setData(groupDataByDate);\n      const areaWiseFilteredData = areaFilter(selectedArea, groupDataByDate);\n      setAreaFilteredData(areaWiseFilteredData);\n      const applyDateFilter = dateFilter(startDate, endDate, areaWiseFilteredData);\n      setDateWiseData(applyDateFilter);\n    };\n\n    covidData();\n  }, []);\n  const selectStyles = {\n    control: props => ({ ...props,\n      width: customWidth > 450 ? \"450px\" : customMarginWidth,\n      display: \"flex\",\n      background: \"white\",\n      height: \"48px\",\n      borderRadius: \"2px\",\n      border: \"1px solid #dbdbdb\"\n    }),\n    menu: () => ({\n      width: customWidth > 450 ? \"450px\" : customWidth,\n      maxHeight: \"40px\",\n      background: \"white\"\n    }),\n    menuList: props => ({ ...props,\n      background: \"white\",\n      height: \"auto\"\n    })\n  };\n\n  const handleDatesChange = ({\n    startDate,\n    endDate\n  }) => {\n    const momentStart = moment(startDate);\n    const momentEnd = moment(endDate);\n    if (momentEnd.diff(momentStart, \"days\") > 30) return null;\n    if (momentEnd.diff(momentStart, \"days\") < 7) return null;\n    setStartDate(startDate);\n    setEndDate(endDate);\n    const dateFilteredData = dateFilter(startDate, endDate, areaFilteredData);\n    dateFilteredData && setDateWiseData(dateFilteredData);\n  };\n\n  const handleSelect = selectValue => {\n    if (!selectValue || selectValue.length === 0) {\n      setselectedArea(selectValue);\n      return;\n    }\n\n    if (selectValue.length > 2) {\n      alert(\"only 2 Areas max please\");\n      return null;\n    }\n\n    const areaWiseFilteredData = areaFilter(selectValue, data);\n    const applyDateFilter = dateFilter(startDate, endDate, areaWiseFilteredData);\n    setAreaFilteredData(areaWiseFilteredData);\n    setDateWiseData(applyDateFilter);\n    setselectedArea(selectValue);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }\n  }, \"Covid Histogram\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chart__controls\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"date__picker\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(DatePicker, {\n    startDate: startDate,\n    endDate: endDate,\n    setStartDate: setStartDate,\n    setEndDate: setEndDate,\n    handleDatesChange: handleDatesChange,\n    orientation: customWidth > 600 ? \"horizontal\" : \"vertical\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"area__select\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CustomSelect, {\n    options: areas,\n    styles: selectStyles,\n    defaultValue: {\n      value: \"County Durham\",\n      label: \"County Durham\"\n    },\n    onChangeHandler: handleSelect,\n    value: selectedArea,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(Histogram, {\n    xAccessor: dateAccessor,\n    yAccessor: casesAccessor,\n    data: dateWiseData,\n    selectedValues: selectedArea,\n    label: \"Daily cases\",\n    customWidth: customWidth,\n    customMarginWidth: customMarginWidth,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }\n  }));\n}\n\nexport default App;","map":{"version":3,"sources":["/home/venkat/Desktop/covid-vis/src/App.jsx"],"names":["React","useState","useEffect","useLayoutEffect","d3","moment","axios","Histogram","DatePicker","dateFilter","areaFilter","groupDataByKey","sortBy","useCurrentWitdh","CustomSelect","App","defaultStartDate","defaultEndDate","data","setData","areaFilteredData","setAreaFilteredData","dateWiseData","setDateWiseData","startDate","setStartDate","endDate","setEndDate","selectedArea","setselectedArea","value","label","areas","setAreas","parseDate","timeFormat","dateAccessor","d","specimenDate","casesAccessor","dailyLabConfirmedCases","customWidth","customMarginWidth","console","log","covidData","getData","get","areaData","ltlas","groupDataByDate","areaNames","Map","map","name","areaName","values","sortedAreas","areaWiseFilteredData","applyDateFilter","selectStyles","control","props","width","display","background","height","borderRadius","border","menu","maxHeight","menuList","handleDatesChange","momentStart","momentEnd","diff","dateFilteredData","handleSelect","selectValue","length","alert"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useLayoutEffect } from \"react\";\nimport * as d3 from \"d3\";\nimport moment from \"moment\";\nimport axios from \"axios\";\nimport Histogram from \"./Histogram\";\nimport DatePicker from \"./DatePicker\";\nimport {\n  dateFilter,\n  areaFilter,\n  groupDataByKey,\n  sortBy,\n  useCurrentWitdh,\n} from \"./Chart/utils\";\nimport \"./App.css\";\nimport CustomSelect from \"./Chart/CustomSelect\";\n\nfunction App() {\n  const defaultStartDate = moment(\"05/05/2020\");\n  const defaultEndDate = moment(\"05/18/2020\");\n  const [data, setData] = useState([]);\n  const [areaFilteredData, setAreaFilteredData] = useState([]);\n  const [dateWiseData, setDateWiseData] = useState([]);\n  const [startDate, setStartDate] = useState(defaultStartDate);\n  const [endDate, setEndDate] = useState(defaultEndDate);\n  const [selectedArea, setselectedArea] = useState([\n    { value: \"County Durham\", label: \"County Durham\" },\n  ]);\n  const [areas, setAreas] = useState([]);\n\n  const parseDate = d3.timeFormat(\"%d/%m/%Y\");\n  const dateAccessor = (d) => parseDate(d.specimenDate);\n  const casesAccessor = (d) => d.dailyLabConfirmedCases;\n\n  const customWidth = useCurrentWitdh();\n\n  const customMarginWidth = customWidth - (20 / 100) * customWidth;\n\n  console.log((20 / 100) * customWidth);\n\n  useEffect(() => {\n    const covidData = async () => {\n      const getData = await axios.get(\"/covid-08-06-2020.json\");\n      const areaData = await getData.data.ltlas;\n      const groupDataByDate = groupDataByKey(\"specimenDate\", areaData);\n      const areaNames = [\n        ...new Map(\n          areaData.map((name) => [\n            name.areaName,\n            { value: name.areaName, label: name.areaName },\n          ])\n        ).values(),\n      ];\n      const sortedAreas = sortBy(\"value\", areaNames);\n      setAreas(sortedAreas);\n      setData(groupDataByDate);\n      const areaWiseFilteredData = areaFilter(selectedArea, groupDataByDate);\n      setAreaFilteredData(areaWiseFilteredData);\n      const applyDateFilter = dateFilter(\n        startDate,\n        endDate,\n        areaWiseFilteredData\n      );\n      setDateWiseData(applyDateFilter);\n    };\n    covidData();\n  }, []);\n\n  const selectStyles = {\n    control: (props) => ({\n      ...props,\n      width: customWidth > 450 ? \"450px\" : customMarginWidth,\n      display: \"flex\",\n      background: \"white\",\n      height: \"48px\",\n      borderRadius: \"2px\",\n      border: \"1px solid #dbdbdb\",\n    }),\n    menu: () => ({\n      width: customWidth > 450 ? \"450px\" : customWidth,\n      maxHeight: \"40px\",\n      background: \"white\",\n    }),\n    menuList: (props) => ({\n      ...props,\n      background: \"white\",\n      height: \"auto\",\n    }),\n  };\n\n  const handleDatesChange = ({ startDate, endDate }) => {\n    const momentStart = moment(startDate);\n    const momentEnd = moment(endDate);\n    if (momentEnd.diff(momentStart, \"days\") > 30) return null;\n    if (momentEnd.diff(momentStart, \"days\") < 7) return null;\n    setStartDate(startDate);\n    setEndDate(endDate);\n    const dateFilteredData = dateFilter(startDate, endDate, areaFilteredData);\n    dateFilteredData && setDateWiseData(dateFilteredData);\n  };\n  const handleSelect = (selectValue) => {\n    if (!selectValue || selectValue.length === 0) {\n      setselectedArea(selectValue);\n      return;\n    }\n    if (selectValue.length > 2) {\n      alert(\"only 2 Areas max please\");\n      return null;\n    }\n    const areaWiseFilteredData = areaFilter(selectValue, data);\n    const applyDateFilter = dateFilter(\n      startDate,\n      endDate,\n      areaWiseFilteredData\n    );\n    setAreaFilteredData(areaWiseFilteredData);\n    setDateWiseData(applyDateFilter);\n    setselectedArea(selectValue);\n  };\n\n  return (\n    <div className=\"App\">\n      <h1 className=\"title\">Covid Histogram</h1>\n      <div className=\"chart__controls\">\n        <div className=\"date__picker\">\n          <DatePicker\n            startDate={startDate}\n            endDate={endDate}\n            setStartDate={setStartDate}\n            setEndDate={setEndDate}\n            handleDatesChange={handleDatesChange}\n            orientation={customWidth > 600 ? \"horizontal\" : \"vertical\"}\n          />\n        </div>\n        <div className=\"area__select\">\n          <CustomSelect\n            options={areas}\n            styles={selectStyles}\n            defaultValue={{ value: \"County Durham\", label: \"County Durham\" }}\n            onChangeHandler={handleSelect}\n            value={selectedArea}\n          />\n        </div>\n      </div>\n\n      <Histogram\n        xAccessor={dateAccessor}\n        yAccessor={casesAccessor}\n        data={dateWiseData}\n        selectedValues={selectedArea}\n        label=\"Daily cases\"\n        customWidth={customWidth}\n        customMarginWidth={customMarginWidth}\n      />\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}